---

## Задача 1

Дайте письменые ответы на следующие вопросы:

- В чём отличие режимов работы сервисов в Docker Swarm кластере: replication и global?
- Какой алгоритм выбора лидера используется в Docker Swarm кластере?
- Что такое Overlay Network?

Ответ:

Для replication указываем количество реплик сервиса, которые запускаем. В global запускается одна реплика на каждом узле, заранее заданного количества реплик нет.

Лидер выбирается командой: docker swarm init. Механизм выбора лидера основан на алгоритме raft, который включает в себя 3 принципа выбора лидера:

Кандидат получает большинство голосов (включая свой) и побеждает в выборах.
Кандидат получает сообщение от уже действующего лидера текущего срока или от любого сервера более старшего срока.
Кандидат не получает за некоторый таймаут большинство голосов
Overlay network - это внутренняя виртуальная сеть кластера docker swarm, которая упрощает взаимодействие узлов кластера между собой.

## Задача 2

Создать ваш первый Docker Swarm кластер в Яндекс.Облаке

Для получения зачета, вам необходимо предоставить скриншот из терминала (консоли), с выводом команды:
```
docker node ls

```
![dockerswarm-save1](https://github.com/slava1005/devops-netology/assets/114395964/3c4618b3-37ae-49f8-a6e1-d97620233345)

## Задача 3

Создать ваш первый, готовый к боевой эксплуатации кластер мониторинга, состоящий из стека микросервисов.

Для получения зачета, вам необходимо предоставить скриншот из терминала (консоли), с выводом команды:
```
docker service ls
```

![dockerswarm-2save](https://github.com/slava1005/devops-netology/assets/114395964/8a853566-0103-486e-b51a-ff8b62374c3d)


## Задача 4 (*)

Выполнить на лидере Docker Swarm кластера команду (указанную ниже) и дать письменное описание её функционала, что она делает и зачем она нужна:
```
# см.документацию: https://docs.docker.com/engine/swarm/swarm_manager_locking/
docker swarm update --autolock=true
```

![dockerswarm-save3](https://github.com/slava1005/devops-netology/assets/114395964/8021968f-1966-4cc7-b03c-a7ac602ea38d)

+ Команда docker swarm update --autolock=true позволяет зашифровать ключ шифрующий логи Raft и TLS ключ используемый для шифрования коммуникаций между нодами другим ключом, для дополнительной безопасности. Соответственно при перезагрузке ноды нужно будет ввести ключ расшифровки вышеуказанных ключей для успешной работы ноды.
