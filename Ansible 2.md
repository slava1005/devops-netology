# Домашнее задание к занятию «Ansible.Часть 2»

### Оформление домашнего задания

1. Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте на проверку ссылку на ваш документ в личном кабинете.  
1. В названии файла укажите номер лекции и фамилию студента. Пример названия:  Ansible. Часть 2 — Александр Александров.
1. Перед отправкой проверьте, что доступ для просмотра открыт всем, у кого есть ссылка. Если нужно прикрепить дополнительные ссылки, добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1

**Выполните действия, приложите файлы с плейбуками и вывод выполнения.**

Напишите три плейбука. При написании рекомендуем использовать текстовый редактор с подсветкой синтаксиса YAML.

Плейбуки должны: 

1. Скачать какой-либо архив, создать папку для распаковки и распаковать скаченный архив. Например, можете использовать [официальный сайт](https://kafka.apache.org/downloads) и зеркало Apache Kafka. При этом можно скачать как исходный код, так и бинарные файлы, запакованные в архив — в нашем задании не принципиально.

*Ответ* <details>

![1_1_1](https://github.com/slava1005/devops-netology/assets/114395964/3f7b2a43-e84c-49a4-8ff7-93ca1a0dd898)

![1_1_2](https://github.com/slava1005/devops-netology/assets/114395964/0bd91e0c-928c-42bc-a9f3-f73f49f7487d)

</details>

2. Установить пакет tuned из стандартного репозитория вашей ОС. Запустить его, как демон — конфигурационный файл systemd появится автоматически при установке. Добавить tuned в автозагрузку.

*Ответ* <details>

![1_2_2](https://github.com/slava1005/devops-netology/assets/114395964/3bbc509a-ceba-4fcf-af7d-b89a7c3b303e)

![1_2_2a](https://github.com/slava1005/devops-netology/assets/114395964/74803be8-ed94-4fc3-987c-ac39735cd104)

![1_2_2b](https://github.com/slava1005/devops-netology/assets/114395964/a24fea32-c59c-447f-9e16-465a87bce30e)

</details>

3. Изменить приветствие системы (motd) при входе на любое другое. Пожалуйста, в этом задании используйте переменную для задания приветствия. Переменную можно задавать любым удобным способом.

*Ответ* <details>

![1_3_1](https://github.com/slava1005/devops-netology/assets/114395964/9debe5f4-feff-4aec-ac7f-df35f2433380)

![1_3_2](https://github.com/slava1005/devops-netology/assets/114395964/57857a99-5177-4300-8b01-83be6c9d4e8a)

![1_3_3](https://github.com/slava1005/devops-netology/assets/114395964/ed0a0562-abf9-48f3-9508-f6025e5d0729)

</details>

### Задание 2

**Выполните действия, приложите файлы с модифицированным плейбуком и вывод выполнения.** 

Модифицируйте плейбук из пункта 3, задания 1. В качестве приветствия он должен установить IP-адрес и hostname управляемого хоста, пожелание хорошего дня системному администратору. 

*Ответ* <details>

![2_1_1](https://github.com/slava1005/devops-netology/assets/114395964/408b7d62-cfe1-4aa5-b9fe-d33a0aef4bc4)

![2_1_2](https://github.com/slava1005/devops-netology/assets/114395964/f3af88a4-50e6-420e-a127-e098167f62bd)

</details>

### Задание 3

**Выполните действия, приложите архив с ролью и вывод выполнения.**

Ознакомьтесь со статьёй [«Ansible - это вам не bash»](https://habr.com/ru/post/494738/), сделайте соответствующие выводы и не используйте модули **shell** или **command** при выполнении задания.

Создайте плейбук, который будет включать в себя одну, созданную вами роль. Роль должна:

1. Установить веб-сервер Apache на управляемые хосты.
2. Сконфигурировать файл index.html c выводом характеристик каждого компьютера как веб-страницу по умолчанию для Apache. Необходимо включить CPU, RAM, величину первого HDD, IP-адрес. Используйте [Ansible facts](https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_vars_facts.html) и [jinja2-template](https://linuxways.net/centos/how-to-use-the-jinja2-template-in-ansible/)
3. Открыть порт 80, если необходимо, запустить сервер и добавить его в автозагрузку.
4. Сделать проверку доступности веб-сайта (ответ 200, модуль uri).

В качестве решения:
- предоставьте плейбук, использующий роль;
- разместите архив созданной роли у себя на Google диске и приложите ссылку на роль в своём решении;
- предоставьте скриншоты выполнения плейбука;
- предоставьте скриншот браузера, отображающего сконфигурированный index.html в качестве сайта.

### Ответ

Ссылка на все плейбуки и роли - [https://disk.yandex.ru/d/8CNrGk6sAe0TQg](https://disk.yandex.ru/d/-mqXhKR0JmQPLg)

Содержание файла плейбука.

<details>

![3_1](https://github.com/slava1005/devops-netology/assets/114395964/3dc2725a-28ea-4da8-a9f6-333dbd66ffea)

</details>

Содержание файла Index.html.j2.

<details>

![3_2](https://github.com/slava1005/devops-netology/assets/114395964/a2c6e6a9-023e-4a7d-931d-681784d511b3)


</details>

Установка Apache, замена файла Index.html, перезауск Apache.

<details>

![3_3](https://github.com/slava1005/devops-netology/assets/114395964/211750e7-7b46-45ff-a2fe-d92008ce5150)


</details>

На управляющей машине запущен бразуер и осуществлен вход на один из управляемых хостов.

<details>

![3_4](https://github.com/slava1005/devops-netology/assets/114395964/9647eeeb-39a1-4c2d-b151-37c117876ff5)


</details>

Проверка сайта через curl с ответом 200.
  
<details>

![3_5](https://github.com/slava1005/devops-netology/assets/114395964/7b743717-b0a7-4a8b-99c1-3395ed743413)


</details>
